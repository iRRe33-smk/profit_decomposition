
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MATLAB quick start &#8212; AMPL API 2.0.3-0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/ampl.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MATLAB API examples" href="examples.html" />
    <link rel="prev" title="Class structure" href="class-structure.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="examples.html" title="MATLAB API examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="class-structure.html" title="Class structure"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AMPL API 2.0.3-0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MATLAB quick start</a><ul>
<li><a class="reference internal" href="#complete-listing">Complete listing</a></li>
<li><a class="reference internal" href="#initialisation">Initialisation</a></li>
<li><a class="reference internal" href="#ampl-environment-creation">AMPL Environment creation</a></li>
<li><a class="reference internal" href="#load-a-model-from-file">Load a model from file</a></li>
<li><a class="reference internal" href="#solve-a-model">Solve a model</a></li>
<li><a class="reference internal" href="#get-an-ampl-entity-in-the-programming-environment-get-objective-value">Get an AMPL entity in the programming environment (get objective value)</a></li>
<li><a class="reference internal" href="#modify-model-data-assign-values-to-parameters">Modify model data (assign values to parameters)</a></li>
<li><a class="reference internal" href="#get-numeric-values-from-variables-and-other-entities">Get numeric values from variables and other entities</a></li>
<li><a class="reference internal" href="#get-arbitrary-values-via-ampl-expressions">Get arbitrary values via ampl expressions</a></li>
<li><a class="reference internal" href="#close-the-ampl-object-to-free-the-resources">Close the AMPL object to free the resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="class-structure.html"
                        title="previous chapter">Class structure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="examples.html"
                        title="next chapter">MATLAB API examples</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quick-start.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="matlab-quick-start">
<span id="secmatlabquickstart"></span><h1>MATLAB quick start<a class="headerlink" href="#matlab-quick-start" title="Permalink to this headline">¶</a></h1>
<p>MATLAB can easily consume Java objects, therefore usage of AMPL API from MATLAB is very direct.
Because of this, just a few MATLAB files are distributed, located in the MATLAB subdirectory of the distribution directory.
An helper script (<strong>setUp.m</strong>) is provided for the user, which sets MATLABs Javaclasspaths
(the paths in which Matlab searches for Java classes) and imports the library’s functionalities.
A function (<strong>initAMPL.m</strong>) is distributed too, to facilitate the process of creating a new AMPL object.
When running the examples, the user can just run the convenient <strong>setupOnce.m</strong> script,
located in the examples directory, which takes care of executing the main setup routine.
Full class reference is given in <a class="reference internal" href="reference.html#secreferencematlab"><span class="std std-ref">MATLAB API reference</span></a>.</p>
<div class="section" id="complete-listing">
<h2>Complete listing<a class="headerlink" href="#complete-listing" title="Permalink to this headline">¶</a></h2>
<p>The complete MATLAB script is below:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Create an AMPL instance</span>
<span class="n">ampl</span> <span class="p">=</span> <span class="n">AMPL</span><span class="p">;</span>

<span class="c">%% If the AMPL installation directory is not in the system search path:</span>
<span class="c">% ampl = AMPL(&#39;full path to the AMPL installation directory&#39;);</span>

<span class="c">% Display version</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">eval</span><span class="p">(</span><span class="s">&#39;option version;&#39;</span><span class="p">)</span>

<span class="c">% Initialisation</span>
<span class="n">basef</span> <span class="p">=</span> <span class="n">fileparts</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="s">&#39;dietModel&#39;</span><span class="p">));</span>
<span class="n">addpath</span><span class="p">(</span><span class="n">fullfile</span><span class="p">(</span><span class="n">basef</span><span class="p">,</span> <span class="s">&#39;../../matlab&#39;</span><span class="p">));</span>
<span class="n">modeldirectory</span> <span class="p">=</span> <span class="n">fullfile</span><span class="p">(</span><span class="n">basef</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="s">&#39;models&#39;</span><span class="p">);</span>

<span class="c">% Load from file the ampl model</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">read</span><span class="p">([</span><span class="n">modeldirectory</span>  <span class="s">&#39;/&#39;</span> <span class="s">&#39;diet.mod&#39;</span><span class="p">]);</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">readData</span><span class="p">([</span><span class="n">modeldirectory</span>  <span class="s">&#39;/&#39;</span> <span class="s">&#39;diet.dat&#39;</span><span class="p">]);</span>

<span class="c">% Solve</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">solve</span>

<span class="c">% Get objective map by AMPL name</span>
<span class="n">totalcost</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getObjective</span><span class="p">(</span><span class="s">&#39;Total_Cost&#39;</span><span class="p">);</span>
<span class="c">% Print it</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;Objective is: %f\n&#39;</span> <span class="p">,</span><span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>

<span class="c">% Reassign data - specific instances</span>
<span class="n">cost</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getParameter</span><span class="p">(</span><span class="s">&#39;cost&#39;</span><span class="p">);</span>
<span class="n">cost</span><span class="p">.</span><span class="n">setValues</span><span class="p">({</span><span class="s">&#39;BEEF&#39;</span><span class="p">;</span><span class="s">&#39;HAM&#39;</span><span class="p">},</span> <span class="p">[</span><span class="mf">5.01</span><span class="p">;</span> <span class="mf">4.55</span><span class="p">]);</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Increased costs of beef and ham.&#39;</span><span class="p">);</span>

<span class="c">% Resolve and display objective</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;New objective value: %f\n&#39;</span><span class="p">,</span> <span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>

<span class="c">% Reassign data - all instances</span>
<span class="n">cost</span><span class="p">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">5.01</span><span class="p">,</span> <span class="mf">4.55</span><span class="p">);</span>

<span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Updated all costs&#39;</span><span class="p">);</span>

<span class="c">% Resolve and display objective</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;New objective value: %f\n&#39;</span><span class="p">,</span> <span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>

<span class="c">% Get the values of the variable Buy in a dataframe object</span>
<span class="n">buy</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getVariable</span><span class="p">(</span><span class="s">&#39;Buy&#39;</span><span class="p">);</span>
<span class="n">df</span> <span class="p">=</span> <span class="n">buy</span><span class="p">.</span><span class="n">getValues</span><span class="p">;</span>
<span class="c">% Print them</span>
<span class="n">df</span>


<span class="c">% Close the AMPL object</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="initialisation">
<h2>Initialisation<a class="headerlink" href="#initialisation" title="Permalink to this headline">¶</a></h2>
<p>To initialise the MATLAB interface, navigate to the MATLAB directory of the distribution and execute the script <strong>setUp.m</strong>.
This should return something on the lines of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">setUp</span>
<span class="n">Using</span> <span class="n">api</span> <span class="n">at</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">Development</span><span class="o">/</span><span class="n">AMPLApi</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">matlab</span><span class="o">/../../</span><span class="n">matlab</span><span class="o">/../</span><span class="n">ampl</span><span class="o">-</span><span class="mf">1.0</span><span class="o">.</span><span class="n">jar</span>
<span class="n">Using</span> <span class="n">ampl</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">Development</span><span class="o">/</span><span class="n">AMPLApi</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">matlab</span><span class="o">/../../</span><span class="n">matlab</span><span class="o">/../</span><span class="n">ampl</span>
</pre></div>
</div>
<p>This procedure must be executed once every session. To execute the examples, the script <strong>setupOnce.m</strong>
is provided in the examples directory and should be used instead.
The main object needed to interact with AMPL is of the AMPL class and can be instantiated as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">ampl</span> <span class="o">=</span> <span class="n">AMPL</span><span class="p">;</span>
</pre></div>
</div>
<p>The statement above creates an instance of the API and names is ampl.</p>
</div>
<div class="section" id="ampl-environment-creation">
<h2>AMPL Environment creation<a class="headerlink" href="#ampl-environment-creation" title="Permalink to this headline">¶</a></h2>
<p>Since the structure of AMPL API for MATLAB is the same as AMPL API for Java, the main method
is the <a class="reference internal" href="classes/matlabAMPL.html#AMPL.eval" title="AMPL.eval"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.eval</span></code></a> function.
Copy the following statements to have a hello world application which interprets the command
<cite>option version;</cite> in the underlying AMPL executable and prints the result on the console.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Create an AMPL instance</span>
<span class="n">ampl</span> <span class="p">=</span> <span class="n">AMPL</span><span class="p">;</span>
<span class="c">% Display version</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">eval</span><span class="p">(</span><span class="s">&#39;option version;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output of the statements above should be something of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ans</span> <span class="o">=</span>
<span class="n">option</span> <span class="n">version</span> <span class="s1">&#39;AMPL Version 20140220 (MS VC++ 10.0, 64-bit)&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="load-a-model-from-file">
<h2>Load a model from file<a class="headerlink" href="#load-a-model-from-file" title="Permalink to this headline">¶</a></h2>
<p>The following lines use the method <a class="reference internal" href="classes/matlabAMPL.html#AMPL.read" title="AMPL.read"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.read</span></code></a> to load a model and
data stored in external (AMPL) files.
If the files are not found, an error will be displayed.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="p">.</span><span class="n">read</span><span class="p">([</span><span class="n">modeldirectory</span>  <span class="s">&#39;/&#39;</span> <span class="s">&#39;diet.mod&#39;</span><span class="p">]);</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">readData</span><span class="p">([</span><span class="n">modeldirectory</span>  <span class="s">&#39;/&#39;</span> <span class="s">&#39;diet.dat&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Once these commands are executed, the AMPL interpreter will have interpreted the content of the two files. No further communication is made between the AMPL interpreter and MATLAB, as every entity is created lazily (as needed).</p>
</div>
<div class="section" id="solve-a-model">
<h2>Solve a model<a class="headerlink" href="#solve-a-model" title="Permalink to this headline">¶</a></h2>
<p>To solve the model, it is sufficient to issue the command:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>
</pre></div>
</div>
<p>which should display, depending on the default solver used, something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CBC</span> <span class="n">trunk</span> <span class="n">optimal</span><span class="p">,</span> <span class="n">objective</span> <span class="mf">118.0594032</span>
<span class="mi">3</span> <span class="n">iterations</span>
</pre></div>
</div>
</div>
<div class="section" id="get-an-ampl-entity-in-the-programming-environment-get-objective-value">
<h2>Get an AMPL entity in the programming environment (get objective value)<a class="headerlink" href="#get-an-ampl-entity-in-the-programming-environment-get-objective-value" title="Permalink to this headline">¶</a></h2>
<p>AMPL API provides Java representations of the AMPL entities, which can be directly used in MATLAB. Usually, not all the entities are of interest for the programmer. The generic procedure is:</p>
<ol class="arabic simple">
<li>Identify the entities that need interaction (either data read or modification)</li>
<li>For each of these entities, create an object of the appropriate class in Java</li>
<li>Get the entity through the AMPL API using <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getEntity" title="AMPL.getEntity"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getEntity</span></code></a> or one of its type safe alternatives (<a class="reference internal" href="classes/matlabAMPL.html#AMPL.getVariable" title="AMPL.getVariable"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getVariable</span></code></a>, <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getParameter" title="AMPL.getParameter"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getParameter</span></code></a>, <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getObjective" title="AMPL.getObjective"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getObjective</span></code></a>  , <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getSet" title="AMPL.getSet"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getSet</span></code></a>, <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getConstraint" title="AMPL.getConstraint"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getConstraint</span></code></a>)</li>
</ol>
<p>To gain access to a specific entity, we can assign to a MATLAB placeholder.
In this example, we want to be able to refer to the AMPL objective <cite>Total_Cost</cite> as <cite>totalcost</cite> in MATLAB.
We can use the following statements to do that and display the current values of the objective.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">totalcost</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getObjective</span><span class="p">(</span><span class="s">&#39;Total_Cost&#39;</span><span class="p">);</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;Objective is: %f\n&#39;</span><span class="p">,</span> <span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
<p>The output of the lines above is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Objective</span> <span class="ow">is</span><span class="p">:</span> <span class="mf">118.05940323955669</span>
</pre></div>
</div>
<p>An alternative way to access a scalar value from the underlying interpreter is to use the function <a class="reference internal" href="classes/matlabAMPL.html#AMPL.getValue" title="AMPL.getValue"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.getValue</span></code></a>. This
function has a very simple syntax and it is useful for all the times in which we are only interested in getting a value, without
having to manipulate the underlying entity. This approach is shown below:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;Objective is: %f\n&#39;</span><span class="p">,</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getValue</span><span class="p">(</span><span class="s">&#39;Total_Cost&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="modify-model-data-assign-values-to-parameters">
<h2>Modify model data (assign values to parameters)<a class="headerlink" href="#modify-model-data-assign-values-to-parameters" title="Permalink to this headline">¶</a></h2>
<p>The input data of an optimisation model is stored in its parameters; these can be scalar or vectorial entities.
Two ways are provided to change the value of vectorial parameter: change specific values or change all values at once.
The example shows an example of both ways, reassigning the values of the parameter costs firstly specifically, then altogether.
Each time, it then solves the model and get the objective function. The functions that can be used to modify the values are
<a class="reference internal" href="classes/matlabParameter.html#Parameter.set" title="Parameter.set"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Parameter.set</span></code></a> and <a class="reference internal" href="classes/matlabParameter.html#Parameter.setValues" title="Parameter.setValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Parameter.setValues</span></code></a>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">cost</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getParameter</span><span class="p">(</span><span class="s">&#39;cost&#39;</span><span class="p">);</span>
<span class="n">cost</span><span class="p">.</span><span class="n">setValues</span><span class="p">({</span><span class="s">&#39;BEEF&#39;</span><span class="p">,</span><span class="s">&#39;HAM&#39;</span><span class="p">},</span> <span class="p">[</span><span class="mf">5.01</span><span class="p">;</span> <span class="mf">4.55</span><span class="p">]);</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Increased costs of beef and ham.&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The code above assigns the values 5.01 and 4.55 to the parameter cost for the objects beef and ham respectively.
The model is then solved again and the new objective is printed with:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;New objective value: %f\n&#39;</span><span class="p">,</span> <span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
<p>If the order of the indexing of an entity is known (i.e. for multiple reassignment), it is not necessary
to specify both the indices and the values. The data vector is assigned to each of the parameter values,
in the order they are represented in AMPL.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Reassign data - all instances</span>
<span class="n">cost</span><span class="p">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">5.01</span><span class="p">,</span> <span class="mf">4.55</span><span class="p">);</span>
<span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Updated all costs&#39;</span><span class="p">);</span>
<span class="c">% Resolve and display objective</span>
<span class="n">ampl</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>
<span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;New objective value: %f\n&#39;</span><span class="p">,</span> <span class="n">totalcost</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>
</pre></div>
</div>
<p>The statements above produce the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Increased</span> <span class="n">costs</span> <span class="n">of</span> <span class="n">beef</span> <span class="ow">and</span> <span class="n">ham</span><span class="o">.</span>
<span class="n">New</span> <span class="n">objective</span> <span class="n">value</span><span class="p">:</span> <span class="mf">144.415720</span>
<span class="n">Updated</span> <span class="nb">all</span> <span class="n">costs</span>
<span class="n">New</span> <span class="n">objective</span> <span class="n">value</span><span class="p">:</span> <span class="mf">164.543750</span>
</pre></div>
</div>
</div>
<div class="section" id="get-numeric-values-from-variables-and-other-entities">
<h2>Get numeric values from variables and other entities<a class="headerlink" href="#get-numeric-values-from-variables-and-other-entities" title="Permalink to this headline">¶</a></h2>
<p>To access all the numeric values contained in a Variable or any other entity, use a <a class="reference internal" href="classes/matlabDataFrame.html#DataFrame" title="DataFrame"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">DataFrame</span></code></a> object. Doing so, the data is detached from
the entity, and there is a considerable performance gain. To do so, we first get the Variable object from AMPL, then we get its data with the
functions, available for all entities: <a class="reference internal" href="classes/matlabVariable.html#Variable.getValues" title="Variable.getValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Variable.getValues</span></code></a>, <a class="reference internal" href="classes/matlabConstraint.html#Constraint.getValues" title="Constraint.getValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Constraint.getValues</span></code></a>, <a class="reference internal" href="classes/matlabObjective.html#Objective.getValues" title="Objective.getValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Objective.getValues</span></code></a>, <a class="reference internal" href="classes/matlabParameter.html#Parameter.getValues" title="Parameter.getValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Parameter.getValues</span></code></a> and <a class="reference internal" href="classes/matlabSet.html#Set.getValues" title="Set.getValues"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">Set.getValues</span></code></a>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Get the values of the variable Buy in a dataframe object</span>
<span class="n">buy</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getVariable</span><span class="p">(</span><span class="s">&#39;Buy&#39;</span><span class="p">);</span>
<span class="n">df</span> <span class="p">=</span> <span class="n">buy</span><span class="p">.</span><span class="n">getValues</span><span class="p">;</span>
<span class="c">% Print them</span>
<span class="n">df</span>
</pre></div>
</div>
<p>The statements above produce the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span>
   <span class="n">j</span> <span class="ow">in</span> <span class="n">FOOD</span>  <span class="o">|</span>  <span class="n">Buy</span>
   <span class="n">BEEF</span>       <span class="o">|</span>  <span class="mf">10.0</span>
   <span class="n">CHK</span>        <span class="o">|</span>  <span class="mf">2.0</span>
   <span class="n">FISH</span>       <span class="o">|</span>  <span class="mf">2.0</span>
   <span class="n">HAM</span>        <span class="o">|</span>  <span class="mf">7.01644736842106</span>
   <span class="n">MCH</span>        <span class="o">|</span>  <span class="mf">10.0</span>
   <span class="n">MTL</span>        <span class="o">|</span>  <span class="mf">10.0</span>
   <span class="n">SPG</span>        <span class="o">|</span>  <span class="mf">6.65570175438596</span>
   <span class="n">TUR</span>        <span class="o">|</span>  <span class="mf">2.0</span>
</pre></div>
</div>
</div>
<div class="section" id="get-arbitrary-values-via-ampl-expressions">
<h2>Get arbitrary values via ampl expressions<a class="headerlink" href="#get-arbitrary-values-via-ampl-expressions" title="Permalink to this headline">¶</a></h2>
<p>Often we are interested in very specific values coming out of the optimization session. To make use of the power of AMPL expressions and avoiding
cluttering up the environment by creating entities, fetching data through arbitrary AMPL expressions is possible. For this model, we are interested
in knowing how close each decision variable is to its upper bound, in percentage.
We can obtain this data into a dataframe with the code:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Get the values of an expression into a DataFrame object</span>
<span class="n">df2</span> <span class="p">=</span> <span class="n">ampl</span><span class="p">.</span><span class="n">getData</span><span class="p">(</span><span class="s">&#39;{j in FOOD} 100*Buy[j]/Buy[j].ub&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The statements above produce the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df2</span> <span class="o">=</span>
<span class="n">index0</span>  <span class="o">|</span>  <span class="mi">100</span><span class="o">*</span><span class="n">Buy</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">Buy</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">ub</span><span class="p">)</span>
<span class="n">BEEF</span>    <span class="o">|</span>  <span class="mf">53.60613810741687</span>
<span class="n">CHK</span>     <span class="o">|</span>  <span class="mf">20.0</span>
<span class="n">FISH</span>    <span class="o">|</span>  <span class="mf">20.0</span>
<span class="n">HAM</span>     <span class="o">|</span>  <span class="mf">100.0</span>
<span class="n">MCH</span>     <span class="o">|</span>  <span class="mf">100.0</span>
<span class="n">MTL</span>     <span class="o">|</span>  <span class="mf">100.0</span>
<span class="n">SPG</span>     <span class="o">|</span>  <span class="mf">93.06052855924978</span>
<span class="n">TUR</span>     <span class="o">|</span>  <span class="mf">20.0</span>
</pre></div>
</div>
</div>
<div class="section" id="close-the-ampl-object-to-free-the-resources">
<h2>Close the AMPL object to free the resources<a class="headerlink" href="#close-the-ampl-object-to-free-the-resources" title="Permalink to this headline">¶</a></h2>
<p>Since the AMPL object is very resource-hungry, it is good practice to make sure it is closed and all its resources released when it is not needed
anymore. This can be easily achieved by calling the function <a class="reference internal" href="classes/matlabAMPL.html#AMPL.close" title="AMPL.close"><code class="xref mat mat-meth docutils literal notranslate"><span class="pre">AMPL.close</span></code></a>.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">ampl</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="examples.html" title="MATLAB API examples"
             >next</a> |</li>
        <li class="right" >
          <a href="class-structure.html" title="Class structure"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">AMPL API 2.0.3-0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013-2017, AMPL Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>